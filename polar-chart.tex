\chapter{Semigeodesic charts}\label{chap:semigeodesic}

This chapter contains formal computational proofs of several statements discussed above.

\section{Polar coordinates}

The property of exponential map in \ref{prop:exp} can be used to define \index{polar coordinates}\emph{polar coordinates} in a smooth surface $\Sigma$ with respect to a point $p\in \Sigma$.

Namely, fix polar coordinates $(\theta,r)$ on tangent plane $\T_p$.
If $\vec v\in \T_p$ has coordinates $(\theta,r)$,
then we say that $q=\exp_p\vec v$ is the point in $\Sigma$ with the polar coordinates $(\theta,r)$, or briefly $q\z=w(r,\theta)$.
Note that according to Proposition~\ref{prop:exp} polar coordinates behave usual way in a neighborhood of $p$;
that is, there is $r_0>0$ such that if $r_1,r_2<r_0$ then $w(r_1,\theta_1) = w(r_2,\theta_2)$ if and only if
$r_1=r_2=0$ or $r_1=r_2$ and $\theta_1=\theta_2+2\cdot n\cdot\pi$ for an integer $n$.

The following statement is known as \index{Gauss lemma}\emph{Gauss lemma},
it will play a key role in the formal proof that shortest paths are geodesics; see \ref{prop:gamma''}.

\begin{thm}{Lemma}\label{lem:palar-perp}
Let $w(\theta,r)$ describes polar coordinates in a neingborhood of point $p$ of smooth surface $\Sigma$.
Then
$w_\theta\perp w_r$
for any $r$ and~$\theta$.
\end{thm}


\parit{Proof.}
Choose $\theta$.
By the definition of exponential map, the curve $\gamma(t)=w(\theta,t)$ is a unit-speed geodesic that starts at $p$;
in particular we have the following two identities:
\begin{enumerate}[(i)]
\item Since the geodesic has unit speed we have $|w_r|=|\gamma'|=1$.
In particular,
 \[
 \tfrac{\partial}{\partial \theta}
 \langle w_r,w_r\rangle=0\]
\item Since $\gamma$ is a geodesic, we have $w_{rr}(\theta,r)=\gamma''(r)\perp\T_{\gamma(r)}$ and therefore 
\[
\langle w_\theta, w_{rr}\rangle=0\]
\end{enumerate}
It follows that
\begin{align*}
\tfrac{\partial}{\partial r}
\langle w_\theta, w_r\rangle
&=
\langle w_{\theta r},w_r\rangle
+
\cancel{\langle w_\theta,w_{rr}\rangle}=
\\
&=
\tfrac12
\cdot 
\tfrac{\partial}{\partial \theta}
\langle w_r, w_r\rangle=
\\
&=0.
\end{align*}
It follows that for fixed $\theta$, the value 
$\langle  w_\theta, w_r\rangle$ does not depend on $r$.

Note that $w(\theta,0)=p$ for any $\theta$.
Therefore
$w_\theta(\theta,0)=0$
and in particular 
\[\langle w_\theta, w_r\rangle=0\]
for $r=0$ and therefore it holds for any $r$.
\qeds

\section{Shortest paths are geodesics: a formal proof}

Let us use the construction of polar coordinates and the Gauss lemma \ref{lem:palar-perp} to prove Proposition~\ref{prop:gamma''}.

\parit{Proof of \ref{prop:gamma''}.}\label{page:proof-of-gamma''}
Let $\gamma\:[0,\ell]\to\Sigma$ be a shortest path parameterized by arc-length.
Suppose $\ell=\length\gamma$ is sufficiently small, so $\gamma$ can be described in the polar coordinates at $p$;
say $\gamma(t)=w(\theta(t),r(t))$ for some functions $t\mapsto \theta(t)$ and $t\mapsto r(t)$ such that $r(0)=0$. %???problem

Note that by chain rule, we have
\[\gamma'= w_\theta\cdot \theta'+ w_r\cdot r'
\eqlbl{eq:chain(gamma)}\]
if the left side is defined.
By Gauss lemma \ref{lem:palar-perp}, $w_\theta\perp w_r$ and by definition of polar coordinates $|w_r|=1$.
Therefore \ref{eq:chain(gamma)} implies
\[|\gamma'(t)|\ge r'(t).\eqlbl{eq:|gamma'|=r'}\]
for any $t$ where $\gamma'(t)$ is defined.

Since $\gamma$ parameterized by arc-length, we have 
\[|\gamma(t_2)-\gamma(t_1)|\le |t_2-t_1|.\]
In particular, $\gamma$ is Lipschitz.
Therefore by Rademacher's theorem (\ref{thm:rademacher}) the derivative $\gamma'$ is defined almost everywhere.
By~\ref{adex:integral-length:a}, we have that
\begin{align*}
\length\gamma&=\int_0^\ell|\gamma'(t)|\cdot dt\ge
\\
&\ge\int_0^\ell r'(t)\cdot dt=
\\
&=r(\ell).
\end{align*}

Note that by the definition of polar coordinates, there is a geodesic of length $r(\ell)$ from $p=\gamma(0)$ to $q=\gamma(\ell)$.
Since $\gamma$ is a shortest path, we have therefore $r(\ell)=\ell$ and moreover $r(t)=t$ for any $t$.
This equality holds if and only if we have equality in \ref{eq:|gamma'|=r'} for almost all $t$.
The latter implies that $\gamma$ is a geodesic.

It remains to prove the partial converse.

Fix a point $p\in\Sigma$.
Let $\eps>0$ be as in \ref{prop:exp}.
Assume a geodesic $\gamma$ of length less than $\eps$ from $p$ to $q$ does not minimize the length between its endpoints.
Then there is a shortest path from $p$ to $q$, which becomes a geodesic if parameterized by its arc-length.
That is, there are two geodesics from $p$ to $q$ of length smaller than $\eps$.
In other words there are two vectors ${\vec v},\vec w\in\T_p$ such that $|{\vec v}|<\eps$, $|\vec w|<\eps$ and 
$q=\exp_p\vec v=\exp_p\vec w$.
But according to \ref{prop:exp}, the exponential map is injective in $\eps$-neighborhood of zero --- a contradiction.\qeds

\section{Gauss curvature}

A chart $(u,v)\mapsto s(u,v)$ of smooth surface $\Sigma$ is called \index{semigeodesic chart}\emph{semigeodesic} if $|s_u|=1$ and $s_u\perp s_v$ for any $(u,v)$.

A chart $(u,v)\mapsto s(u,v)$ is called \index{orthogonal chart}\emph{orthogonal} if $s_u\perp s_v$ for any $(u,v)$.
Note that any semigeodesic chart is orthogonal.

\begin{thm}{Proposition}\label{prop:K(semigeodesic)}
Any point $p$ on a smooth surface $\Sigma$ can be covered by a semigeodesic chart $(u,v)\mapsto s(u,v)$.

Moreover, if $(u,v)\mapsto s(u,v)$ is a semigeodesic chart, 
$b=b(u,v)\df|s_v|$,
$\vec u(u,v)\df s_u$
and 
$\vec v(u,v)\df\tfrac{s_v}b$,
then 
\begin{align*}
\langle\vec u_u,\vec v\rangle&=0,
\\
\langle\vec u_v,\vec v\rangle&=b_u,
\end{align*}
and 
\[K=-\frac{b_{uu}}b,\]
where $K=K(u,v)$ denotes the Gauss curvature of $\Sigma$ at $s(u,v)$.

\end{thm}

\parit{Proof.}
By Gauss lemma (\ref{lem:palar-perp}) polar coordinates is an example of a semigeodesic chart.
It remains to find a point $q\ne p$ such that polar coordinates on $\Sigma$ with center at $q$ cover $p$;
any sufficiently close point will do the trick. %??? needs bit more

The last statements follows from \ref{lem:K(orthogonal)}.
Indeed a semigeodesic it is orthogonal with $a\df|s_u|\equiv1$.
Therefore the identities $\langle\vec u_u,\vec v\rangle=0$,
$\langle\vec u_v,\vec v\rangle=b_u$ follow from \ref{eq:key-orthogonal} in the proof of \ref{lem:K(orthogonal)}
and the expression for Gauss curvature follows directly from \ref{lem:K(orthogonal)}.
\qeds

\begin{thm}{Lemma}\label{lem:K(orthogonal)}
Let $(u,v)\mapsto s(u,v)$ be a orthogonal chart of smooth surface $\Sigma$.
Then 
\[K=-\frac1{a\cdot b}\cdot
\left(
\frac{\partial}{\partial u}
\left(\frac{b_u}a \right)
+
\frac{\partial}{\partial v}
\left(\frac{a_v}b\right)
\right)
\eqlbl{eq:K(orthonormal)}\]
where 
$a=a(u,v)\df|s_u|$,
$b=b(u,v)\df| s_v|$,
and
$K=K(u,v)$ denotes the Gauss curvature of $\Sigma$ at $s(u,v)$.
\end{thm}

\parit{Proof.}
Set $\vec u(u,v)\df\tfrac{s_u}a$
and 
$\vec v(u,v)\df\tfrac{s_v}b$.
Recall that $\Norm(u,v)$ denotes the unit normal vector to $\Sigma$ at $s(u,v)$.

Observe that $\vec u, \vec v,\Norm$ form an orthonormal frame for any $(u,v)$.
Without loss of generality we may assume that the frame $\vec u, \vec v,\Norm$ is oriented; that is, $\Norm=\vec u\times \vec v$ for any $(u,v)$.

Suppose that $\ell=\ell(u,v)$, $m=m(u,v)$, and $n=n(u,v)$ be the components of the matrix describing the shape operator in the frame $\vec u, \vec v$.
Since $\vec u, \vec v$ is an orthonormal frame, by \ref{ex:shape-chart} we have
\[
\begin{aligned}
\tfrac1{a^2}
\cdot
\langle s_{uu},\Norm\rangle
=
\langle S(\vec u),\vec u\rangle
&=\ell,
&
\tfrac1{a\cdot b}
\cdot
\langle s_{uv},\Norm\rangle
=
\langle S(\vec u),\vec v\rangle&=m,
\\
\tfrac1{a\cdot b}
\cdot
\langle s_{vu},\Norm\rangle
=
\langle S(\vec v),\vec u\rangle&=m,
&
\tfrac1{b^2}
\cdot
\langle s_{vv},\Norm\rangle
=
\langle S(\vec v),\vec v\rangle&=n.
\end{aligned}
\eqlbl{eq:shape-lmn}
\]

First let us show that the statement follows from the following identities:
\[
\begin{aligned}
\vec u_u
&=
-\tfrac1{b}\cdot a_v
\cdot
\vec v 
+
a\cdot \ell\cdot \Norm
,
&
\vec v_u
&=
\tfrac1{b}\cdot a_v
\cdot \vec u
+
a\cdot m\cdot \Norm
\\
\vec u_v
&=
-\tfrac1{a}\cdot b_u\cdot\vec v
+
b\cdot m\cdot \Norm
,
&
\vec v_v
&=\tfrac1{a}\cdot b_u\cdot\vec u
+
b\cdot n\cdot \Norm
\end{aligned}
\eqlbl{eq:key-orthogonal}
\]

Indeed, recall that the Gauss curvature equals to the determinant of the matrix $
(\begin{smallmatrix}
\ell&m\\n&n
\end{smallmatrix}
)
$;
that is, $K=\ell\cdot n-m^2$.
Therefore 
\begin{align*}
\langle\vec u_u,\vec v_v\rangle 
-
\langle\vec u_v,\vec v_u\rangle
&=a\cdot b\cdot(\ell\cdot n-m^2)=
\\
&=a\cdot b\cdot K.
\intertext{On the other hand}
\langle\vec u_u,\vec v_v\rangle 
-
\langle\vec u_v,\vec v_u\rangle
&= 
\left(
\tfrac{\partial}{\partial v}
\langle\vec u_u,\vec v\rangle
-
\cancel{\langle\vec u_{uv},\vec v\rangle}
\right)-
\\
&-
\left(
\tfrac{\partial}{\partial u}
\langle\vec u_v,\vec v\rangle
-
\cancel{\langle\vec u_{uv},\vec v\rangle}
\right)=
\\
&=\tfrac{\partial}{\partial v}(-\tfrac1{b}\cdot a_v)
-
\tfrac{\partial}{\partial u}(\tfrac1{a}\cdot b_u)
\end{align*}
The identity \ref{eq:K(orthonormal)} follows since the left hand sides in the last two equations are identical.

It remains to prove \ref{eq:key-orthogonal}.
Since the frame $\vec u, \vec v,\Norm$ is orthonormal,
first two vector identities are equivalent to the following six real identities:
\[
\begin{aligned}
\langle\vec u_u,\vec u\rangle
&=0,
&
\langle\vec v_u,\vec u\rangle
&=
\tfrac1{b}\cdot a_v,
\\
\langle\vec u_u,\vec v\rangle
&=-\tfrac1{b}\cdot a_v,
&
\langle\vec v_u,\vec v\rangle
&=0,
\\
\langle\vec u_u,\Norm\rangle
&=a\cdot \ell,
&
\langle\vec v_u,\Norm\rangle
&=
a\cdot m.
\end{aligned}
\eqlbl{eq:key-orthogonal/2}
\]

By taking partial derivatives of the identities
$\langle\vec u,\vec u\rangle=1$,
$\langle\vec u,\vec v\rangle=0$, and
$\langle\vec v,\vec v\rangle=1$,
we get 
\begin{align*}
\langle\vec u_u,\vec u\rangle
&=0,
&
\langle\vec v_u,\vec v\rangle
&=0,
&
\langle\vec v_u,\vec u\rangle
&=
-
\langle\vec v,\vec u_u\rangle.
\end{align*}


Further, observe that
\[
\begin{aligned}
\vec v_u
&=
\tfrac{\partial}{\partial v}
(\tfrac1b\cdot  s_v)=
\\
&=\tfrac1b\cdot s_{uv}
+
\tfrac{\partial}{\partial u}(\tfrac1b)
\cdot
 s_v.
\end{aligned}
\eqlbl{eq:dv/du}
\]
Therefore 
\begin{align*}
\langle\vec v_u,\vec u\rangle
&=
\tfrac1{a\cdot b}\cdot \langle s_{vu}, s_u\rangle
=
\\
&=\tfrac1{2\cdot a\cdot b}\cdot \tfrac{\partial}{\partial v}\langle s_u, s_u\rangle=
\\
&=\tfrac1{2\cdot a\cdot b}\cdot \tfrac{\partial a^2}{\partial v}=
\\
&=\tfrac1{b}\cdot a_v
\intertext{and}
\langle\vec v,\vec u_u\rangle
&=-\tfrac1{b}\cdot a_v.
\end{align*}
Since
$0=\tfrac{\partial}{\partial u}\langle\vec v,\vec u\rangle=
\langle\vec v_u,\vec u\rangle
+
\langle\vec v,\vec u_u\rangle$,
we get
\begin{align*}
\langle\vec v_u,\vec u\rangle
=
-
\langle\vec v,\vec u_u\rangle
&=\tfrac1{b}\cdot a_v.
\end{align*}

Applying \ref{eq:shape-lmn} and \ref{eq:dv/du}, we get
\begin{align*}
\langle\vec u_u,\Norm\rangle
&=
\tfrac1{a}\cdot \langle s_{uu},\Norm\rangle
=a\cdot \ell,
\\
\langle\vec v_u,\Norm\rangle
&=
\tfrac1{a}\cdot \langle s_{uv},\Norm\rangle
=a\cdot m,
\end{align*}
that implies the last two equalities in \ref{eq:key-orthogonal/2}.
Therefore the first two identities in \ref{eq:key-orthogonal} are proved.
The other two identities in \ref{eq:key-orthogonal} can be proved along the same lines.
\qeds


\begin{thm}{Corollary}
Let $(u,v)\mapsto s(u,v)$ be a orthogonal chart of smooth surface $\Sigma$.
Set 
$a=a(u,v)\df|s_u|$,
$b=b(u,v)\df| s_v|$,
$\vec u(u,v)\df\tfrac{s_u}a$,
and 
$\vec v(u,v)\df\tfrac{s_v}b$.
Then $\vec u,\vec v$ are unit tangent fields orthogonal to each other and
for any tangent vector $\vec w\in \T_p$ and 
$\langle\vec u_u\vec v\rangle=0$, $\langle\vec u_v\vec v\rangle=b_u$ 
\end{thm}


\begin{thm}{Exericse}\label{ex:conformal}
Suppose that $(u,v)\mapsto s(u,v)$ is a \index{conformal chart}\emph{conformal chart};
that is, $ s_u\perp s_v$ and $| s_u|=| s_v|$ for any $(u,v)$.
Show that Gauss curvature can be expressed as 
\[K=-\frac{\triangle (\ln b)}{b^2},\]
where $\triangle$ denotes the \index{laplacian}\emph{laplacian}; that is, $\triangle=\tfrac{\partial^2}{\partial u^2}+\tfrac{\partial^2}{\partial v^2}$.
\end{thm}


\section{The remarkable theorem}

Let $\Sigma$ and $\hat{\Sigma}$ be two smooth regular surfaces in the Euclidean space.
A map $f\:\Sigma\to \hat{\Sigma}$ is called  \index{length-preserving}\emph{length-preserving} if for any curve $\gamma$ in $\Sigma$ the curve $\hat\gamma=f\circ\gamma$ in $\hat{\Sigma}$ has the same length. %???it is sufficient to consider smooth only curves???
If in addition $f$ is smooth and bijective, then it is called \index{intrinsic isometry}\emph{intrinsic isometry}. 

A simple example of intrinsic isometry can obtained by warping a plane into a cylinder.
The following exercise produce slightly more interesting example.

%???+PIC

\begin{thm}{Exercise}\label{ex:deformation}
Suppose $\gamma(t)=(x(t),y(t))$ is a smooth unit-speed curve in the plane such that $y(t)=a\cdot \cos t$.
Let $\Sigma_\gamma$ be the surface of revolution of $\gamma$ around the $x$-axis.
Show that a small open domain in $\Sigma_\gamma$ admits a smooth length-pereserving map to the unit sphere.

Conclude that any round disc $\Delta$ in $\SS^2$ of intrinsic radius smaller than $\tfrac\pi2$ admits a smooth length preserving deformation; that is, there is one parameter family of surfaces with boundary $\Delta_t$, such that $\Delta_0=\Delta$ and $\Delta_t$ is not congruent to $\Delta_0$ for any $t\ne0$.\footnote{In fact any disc in $\SS^2$ of intrinsic radius smaller than $\pi$ admits a smooth length preserving deformation. %???REF
}
\end{thm}


\begin{thm}{Theorem}\label{thm:remarkable}
Suppose $f\:\Sigma\to \hat{\Sigma}$ is an intrinsic isometry between two smooth regular surfaces in  the Euclidean space; $p\in \Sigma$ and $\hat p\z=f(p)\in \Sigma$.
Then 
\[K(p)_{\Sigma}=K(\hat p)_{\hat{\Sigma}};\]
that is, the Gauss curvature of $\Sigma$ at $p$ is the same as the Gauss curvature of $\hat{\Sigma}$ at $\hat p$.
\end{thm}

This theorem was proved by Carl Friedrich Gauss \cite{gauss} who called it \index{Remarkable theorem}\emph{Remarkable theorem} (\index{Theorema Egregium}\emph{Theorema Egregium}).
The theorem is indeed remarkable because the Gauss curvature is defined as a product of principle curvatures which might be different at these points; however, according to the theorem, their product can not change.
In other words, the Gaussian curvature is an {}\emph{intrinsic invariant}.

In fact Gauss curvature of the surface at the given point can be found {}\emph{intrinsically},
by measuring the lengths of curves in the surface.
For example, Gauss curvature $K(p)$ in the following formula for the circumference $c(r)$ of a geodesic circle centered at $p$ in a surface: 
\[c(r)=2\cdot\pi\cdot r-\tfrac\pi3\cdot K(p)\cdot r^3+o(r^3).\]

Note that the theorem implies there is no smooth length-preserving map that sends an open region in the unit sphere to the plane.%
\footnote{There are plenty of non-smooth length-preserving maps from the sphere to the plane; see \cite{petrunin-yashinski} and the references there in.}
It follows since the Gauss curvature of the plane is zero and the unit sphere has Gauss curvature 1. 
In other words, there is no map of a region on Earth without distortion.

\parit{Proof.}
 Choose a chart $(u,v)\mapsto s(u,v)$ on $\Sigma$ and set
$\hat s =f\circ s$.
Note that $\hat s$ is a chart of $\hat{\Sigma}$ and 
\begin{align*}
\langle s_u,s_u\rangle
&=
\langle \hat s_u, \hat s_u\rangle,
&
\langle s_u, s_v\rangle
&=
\langle \hat s_u, \hat s_v\rangle,
&
\langle s_v, s_v\rangle
&=
\langle \hat s_v, \hat s_v\rangle
\end{align*}
at any $(u,v)$.
Indeed the first and the third identity hold since otherwise $f$ does not preserve length of coordinate lines $\gamma\:t\mapsto s(t,v)$ or  $\gamma\:t\z\mapsto s(u,t)$.
Taking this into account, the second identity hold since otherwise $f$ does not preserve length of coordinate lines $\gamma\:t\z\mapsto s(t,c-t)$ for some constant $c$.

It follows that if $s$ is a semigeodesic chart of $\Sigma$,
then $\hat s$ is a semigeodesic chart of $\hat{\Sigma}$.
It remains to apply \ref{prop:K(semigeodesic)}.
\qeds

\section{Rotation of a vector field}

Let $\Sigma$ be a smooth oriented surface and $\gamma$ a simple closed path in $\Sigma$.
Suppose that $\vec u$ is a field of unit tangent vectors to $\Sigma$ defined in a neighborhood of $\gamma$.
Denote by $\vec v$ the field obtained from by a counterclockwise rotation of the tangent plane at each point; it could be also defined by $\vec v=\Norm\times\vec u$.
Then the \index{rotation}\emph{rotation} of $\vec u$ around $\gamma$ is defined as the integral
\[\rot_\gamma\vec u
\df
\int_0^1\langle\vec u'(t),\vec v(t)\rangle\cdot dt.\]

\begin{thm}{Lemma}\label{lem:rotation-parallel}
Suppose that $\gamma$ is a loop based at a point $p$ in a smooth oriented surface $\Sigma$ and $\vec u$ is a field of tangent unit vectors to $\Sigma$ defined in a neighborhood of $\gamma$.
Then the parallel transport $\iota_\gamma\:\T_p\to\T_p$ is a clockwise rotation by the angle $\rot_\gamma\vec u$.

In particular rotations of different vector fields around $\gamma$ may only differ by a multiple of $2\cdot\pi$.
\end{thm}

\parit{Proof.}
As above, set $\vec v=\Norm\times\vec u$. 
Denote by $\vec u(t)$ and $\vec v(t)$ the vectors at $\gamma(t)$ of the fields $\vec u$ and $\vec v$ respectively.

Let $t\mapsto \vec x(t)\in \T_{\gamma(t)}$ be a parallel vector field along $\gamma$ such that $\vec x(0)=\vec u(0)$.
Set $\vec y=\Norm\times\vec x$.

Note that there is a continuous function $t\mapsto \phi(t)$ such that 
$\vec u(t)$ is a counterclockwise rotation of $\vec x(0)$ by angle $\phi(t)$.
Since $\vec x(0)=\vec u(0)$, we can (and will) assume that $\phi(0)=0$.

Note that
\begin{align*}
\vec u(t)&=\cos[\phi(t)]\cdot \vec x(t)+\sin[\phi(t)]\cdot \vec y(t)
\\
\vec v(t)&=-\sin[\phi(t)]\cdot \vec x(t)+\cos[\phi(t)]\cdot \vec y(t)
\end{align*}
It follows that 
\begin{align*}
\langle\vec u'(t),\vec v(t)\rangle
&=\phi'(t)\cdot(\cos[\phi(t)]^2\cdot \langle\vec x(t),\vec x(t)\rangle]+\sin[\phi(t)]^2\cdot \langle\vec y(t),\vec y(t)\rangle])=
\\
&=\phi'(t).
\end{align*}

Therefore
\begin{align*}
\rot_\gamma\vec u&=\int_0^1\langle\vec u'(t),\vec v(t)\rangle\cdot dt=
\\
&=\int_0^1\phi'(t)\cdot dt=
\\
&=\phi(1).
\end{align*}

Observe that 
\begin{itemize}
\item $\iota_\gamma(\vec x(0))=\vec x(1)$,

\item $\vec u(0))$ is a counterclockwise rotation of $\vec x(0)$ by angle $\phi(0)=0$, and 

\item $\vec u(1)$ is a counterclockwise rotation of $\vec x(1)$ by angle $\phi(1)=\rot_\gamma\vec u$,

\item $\vec u(0))=\vec u(1)$.
\end{itemize}
It follows that $\vec x(1)$ is a clockwise rotation of $\vec x(0)$ by angle $\rot_\gamma\vec u$, and the result follows.
\qeds

\begin{thm}{Lemma}\label{lem:rotation-semigeoesic}
Let $(u,v)\mapsto s(u,v)$ of $\Sigma$ be a semigeodesci chart on a smooth surface $\Sigma$.
Suppose that a simple loop $\gamma$ bounds a disc $\Delta$ that is covered completely by $s$.
Then 
\[\rot_\gamma\vec u+\iint_\Delta K=0,\]
where $\vec u=s_u$ and $K$ denote the Gauss curvature of $\Sigma$.
\end{thm}

The proof is done by a calculation with use the so called \emph{Green formula} which can be formulated the following way:

Let $\alpha$ be a piecewise smooth simple closed curve in the $(u,v)$-coordinate plane that bounds a compact region $D$.
Suppose that $\alpha$ is oriented in such a way that $D$ lies on its left.
Then for any two smooth functions $P$ and $Q$ defined on $D$ we have
\[\iint_D (Q_u- P_v)\cdot du\cdot dv=\int_\alpha (P\cdot du+Q\cdot dv).\]
Note that the Green formula can be prved by applying the Curl theorem (\ref{thm:curl}) assuming that the $(u,v)$-plane is a coordinate plane in $\RR^3$ and $\vec u=P\cdot\vec i+Q\cdot vec j$.

This lemma will paly a key role in the proof of Gauss--Bonnet formula given in the next section.
Note that Green and similar to Gauss--Bonnet formulas are similar --- they relate the integral along a disc and its boundary curve.
So it should be not surprising Green helps to prove Gauss--Bonnet.

\parit{Proof.}
Let us write $\gamma$ in the $(u,v)$-coordinates: $\gamma(t)=s(u(t),v(t))$. Set $\vec v=\tfrac{s_v}{b}$, note that $\vec v$ is a unit vector field orthogonal to $\vec u$ and we can assume that it is counterclockwise rotation of $\vec u$ by angle $\tfrac{\pi}2$.

\begin{align*}
\rot_\gamma \vec u&=\int_0^1\langle\vec u'(t),\vec v(t)\rangle\cdot dt=
\intertext{by the chain rule}
&=\int_0^1[\langle\vec u_u,\vec v(t)\rangle\cdot u'(t)+\langle\vec u_v,\vec v(t)\rangle\cdot v'(t)]\cdot dt=
\intertext{by \ref{prop:K(semigeodesic)} (here $b=|s_v|$)}
&=\int_0^1b_u\cdot v'(t)\cdot dt=
\\
&=\int_{s^{-1}\circ\gamma}b_u\cdot dv=
\intertext{by the Green formula}
&=\iint_{s^{-1}(R)}b_{uu}\cdot du\cdot dv=
\intertext{Since $\jac s=b$}
&=\iint_R\frac{b_{uu}}{b}=
\intertext{by \ref{prop:K(semigeodesic)}, $K=-\tfrac{b_{uu}}{b}$, so we get}
&=-\iint_{R}K.
\end{align*}
\qedsf

\section{Gauss--Bonnet formula: a formal proof}\label{page:gauss--bonnet:formal}

\parit{Proof of the Gauss--Bonnet formula (\ref{thm:gb}).}
First assume that $\Delta$ is covered by a semigeodesic chart.
Note that the following weaker formula follows from \ref{prop:pt+tgc},
\ref{lem:rotation-parallel},
and \ref{lem:rotation-semigeoesic}:
\[\GB(\Delta)=2\cdot n\cdot \pi,
\eqlbl{eq:gb(n)}\]
where $n=n(\Delta)$ is an integer.

By \ref{prop:K(semigeodesic)}, any point can be covered by a semigeodesic chart.
Therefore applying Lemma~\ref{lem:GB-sum} finite number of times we can show that 
\ref{eq:gb(n)} holds for any given disc $\Delta$ in $\Sigma$.

Further e will use \ref{prop:total-signed-curvature} which states that $\GB(\Delta)=0$ if $\Sigma$ is a plane.

Assume that $\Delta$ lies in a local graph realization $z=f(x,y)$ of~$\Sigma$.
Consider one parameter family $\Sigma_t$ of graphs $z=t\cdot f(x,y)$ and denote by $\Delta_t$ the corresponding disc in $\Sigma_t$, so $\Delta_1=\Delta$ amd $\Delta_0$ is its projection to the $(x,y)$-plane.
Note that the function $f\:t\mapsto \GB(\Delta_t)$ is continuous.
From above $f(t)$ is a multiple of $2\cdot\pi$ for any $t$.
It follows that $f$ is a constant function.
In particular 
\begin{align*}
\GB(\Delta)&=\GB(\Delta_0)=
\\
&=0,
\end{align*}
where the last equality follows from $\ref{prop:total-signed-curvature}$.

We proved that 
\[\GB(\Delta)=0\eqlbl{eq:GB=0}\]
if $\Delta$ lies in a graph $z=f(x,y)$ for some $(x,y,z)$-coordinate system.
Since a neighborhood of any point of $\Sigma$ can be covered by such a graph, applying Lemma~\ref{lem:GB-sum} as above we get that \ref{eq:GB=0} holds for any disc $\Delta$ in $\Sigma$.
\qeds





\section{Rauch comparison}

The following proposition is a baby case of the so called \index{Rauch comparison theorem}\emph{Rauch comparison theorem}.

\begin{thm}{Proposition}\label{prop:rauch}
Suppose that $p$ is a point on a smooth surface $\Sigma$ and $\exp_p\:\T_p\to \Sigma$ is the exponential map.
Given a curve $\tilde\gamma$ in the tangent plane $\T_p$, set 
\[\gamma=\exp_p\circ\tilde\gamma;\]
note that $\gamma$ is a curve in $\Sigma$.

\begin{subthm}{prop:rauch:K>=0}
If $\Sigma$ has nonnegative Gauss curvature, then $\exp_p$ is length nonexpanding in a small neighborhood of $0$;
that is, there is $r_0>0$ such that $\tilde\gamma$ lies in a $r_0$ neighborhood of $0$ in the tangent plane $\T_p$, then
\[\length \gamma\le \length \tilde\gamma.\]
\end{subthm}

\begin{subthm}{prop:rauch:K=<0}
If $\Sigma$ has nonpositive Gauss curvature, then $\exp_p$ is length noncontractin in a small neighborhood of $0$;
that is, there is $r_0>0$ such that $\tilde\gamma$ lies in a $r_0$ neighborhood of $0$ in the tangent plane $\T_p$, then
\[\length \gamma\ge \length \tilde\gamma.\]
\end{subthm}

\end{thm}

\parit{Proof.}
Suppose $(\theta(t),r(t))$ are polar coordinates of $\tilde\gamma(t)$.
Note that $\gamma(t)=w(\theta(t),r(t))$; that is, $(\theta(t),r(t))$ are polar coordinates of $\gamma(t)$ on $\Sigma$.

Set $b(\theta,r)\df|w_\theta|$.
By \ref{prop:K(semigeodesic)}
\[b_{rr}=-K\cdot b.\]
If $K\ge 0$, then $r\mapsto b(\theta,r)$ is concave
and
if $K\le 0$, then $r\mapsto b(\theta,r)$ is convex for any fixed $\theta$.
Note that $b(\theta,0)=0$ and by \ref{obs:d(exp)=1}, $b_\theta(\theta,0)=1$.
Therefore 
\[
\begin{aligned}
b(\theta,r)\le r\quad\text{if}\quad K&\ge 0 \quad\text{and}
\\
b(\theta,r)\ge r\quad\text{if}\quad K&\le 0.
\end{aligned}
\eqlbl{eq:b-K}
\]

Without loss of generality we may assume that $\tilde\gamma\:[a,b]\to \T_p$ is parameterized by length;
in particular it is a Lischitz curve.
Note that
\begin{align*}
\length\tilde\gamma&=\int_a^b\sqrt{r'(t)^2+r(t)^2\cdot\theta'(t)^2}.
\intertext{Applying \ref{lem:palar-perp}, we get}
\length\gamma&=\int_a^b\sqrt{r'(t)^2+b(\theta(t),r(t))^2\cdot\theta'(t)^2}.
\end{align*}
By \ref{eq:b-K} the statement follows.
\qeds

\begin{thm}{Exercise}\label{ex:K=0}
Suppose that a smooth surface $\Sigma$ has vanishing Gauss curvature.
Show that $\Sigma$ is \index{locally flat surface}\emph{locally flat};
that is, a neighborhood of any point in $\Sigma$ admits an intrinsic isometry to an open domain in the Euclidean plane.  
\end{thm}
